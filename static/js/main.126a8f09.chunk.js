(this["webpackJsonptodo-jm"]=this["webpackJsonptodo-jm"]||[]).push([[0],{33:function(t,e,n){},34:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n.n(c),o=n(8),s=n.n(o),r=n(3),i=n(17),u=n(4),d=n(10),l=n(18),j=n.n(l),b=n(7),O=n(2),p="ADD_NEW_TODO",f="GET_CURRENT_KEY",m="HANDLE_COMPLETED",x="REMOVE_TODO",v="SET_EDIT_MODE",h="CANCEL_EDIT_MODE",y="ADD_EDITED_TODO",g="REMOVE_COMPLETED",E="SET_CURRENT_FILTER",k=function(t,e){return{type:h,payload:{idx:t,taskStatus:e}}},D={todos:[{id:Date.now(),text:"Learn React",time:"12:25",status:"active"},{id:1,text:"Learn Redux",time:"12:27",status:"active"},{id:2,text:"Ask Serhio questions about JS",time:"12:29",status:"completed"},{id:3,text:"Learn async code from code.mu",time:"12:45",status:"active"}],currentFilter:"all",currentKey:null,filters:["all","active","completed"]},N={key:"todos",storage:j.a,whitelist:["app"]},C=Object(u.b)({app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,e=arguments.length>1?arguments[1]:void 0,n=e.type,c=e.payload;switch(n){case p:return c.trim()?Object(O.a)(Object(O.a)({},t),{},{inputValue:"",currentKey:null,todos:t.todos.concat({id:Math.random(),text:c,time:(new Date).getHours()+" "+(new Date).getMinutes(),status:"active"})}):Object(O.a)({},t);case f:return Object(O.a)(Object(O.a)({},t),{},{currentKey:c});case m:var a=c.i,o=c.status;c.id;console.log("payload",c);var s=Object(b.a)(t.todos);return s[a].status="active"===o?"completed":"active",Object(O.a)(Object(O.a)({},t),{},{todos:s});case x:return console.log("payload",c),Object(O.a)(Object(O.a)({},t),{},{todos:t.todos.filter((function(t){return t.id!==c}))});case v:var r=Object(b.a)(t.todos);return r.some((function(t){return"editing"===t.status}))&&r.map((function(t){return"editing"===t.status?t.status="active":t})),r[c].status="editing",Object(O.a)(Object(O.a)({},t),{},{todos:r});case h:var i=c.idx,u=c.taskStatus,d=Object(b.a)(t.todos);return d[i].status=u,Object(O.a)(Object(O.a)({},t),{},{todos:d});case y:var l=c.index,j=c.editedText,k=c.editedStatus,N=Object(b.a)(t.todos);return N[l].text=j,N[l].status=k,Object(O.a)(Object(O.a)({},t),{},{todos:N});case g:return Object(O.a)(Object(O.a)({},t),{},{todos:c.filter((function(t){return"active"===t.status}))});case E:return Object(O.a)(Object(O.a)({},t),{},{currentFilter:c});default:return t}}}),R=Object(d.a)(N,C),w=Object(u.c)(R),T=Object(d.b)(w),S=n(5),_=n(1),L=function(t){t.valueHandler;var e=Object(r.c)(),n=Object(c.useState)(""),a=Object(S.a)(n,2),o=a[0],s=a[1];return Object(_.jsxs)("header",{className:"header",children:[Object(_.jsx)("h1",{children:"todos"}),Object(_.jsx)("form",{onSubmit:function(t){t.preventDefault(),e({type:p,payload:o}),s("")},children:Object(_.jsx)("input",{value:o,className:"new-todo",placeholder:"What needs to be done?",autoFocus:!0,onChange:function(t){return function(t){var e=t.target.value;return s(e)}(t)}})})]})},M=function(t){var e=t.tasksRemaining,n=t.onFilter,c=t.onRemoveCompleted,a=t.filter,o=Object(r.d)((function(t){return t.app.filters}));return Object(_.jsxs)("footer",{className:"footer",children:[Object(_.jsx)("span",{className:"todo-count",children:e?"Active ".concat(e):"All Done!"}),Object(_.jsx)("ul",{className:"filters",children:o.map((function(t){return Object(_.jsx)("li",{children:Object(_.jsx)("button",{onClick:n,className:t===a?"selected":"","data-filter":t,children:t})},t)}))}),Object(_.jsx)("button",{onClick:c,className:"clear-completed",children:"Clear completed"})]})},F=n(19),A=n.n(F),I=function(t){var e=t.text,n=t.time,a=t.status,o=t.i,s=t.onComplete,i=t.onRemove,u=t.id,d=Object(r.c)(),l=Object(c.useState)(e),j=Object(S.a)(l,2),b=j[0],O=j[1],p=Object(c.useState)(!1),m=Object(S.a)(p,2),x=m[0],h=m[1],g=Object(c.useState)(null),E=Object(S.a)(g,2),D=E[0],N=E[1],C=function t(n){27===n.keyCode&&(window.removeEventListener("keydown",t),d(k(o,D)),h(!1),O(e))};return Object(c.useEffect)((function(){if(x)return window.addEventListener("keydown",C),function(){return window.addEventListener("keydown",C)}})),Object(_.jsxs)("li",{className:A()({completed:"completed"===a,editing:"editing"===a}),children:[Object(_.jsxs)("div",{className:"view",children:[Object(_.jsx)("input",{onChange:function(){return s(o,a,u)},className:"toggle",type:"checkbox",checked:"completed"===a}),Object(_.jsxs)("label",{children:[Object(_.jsx)("span",{className:"description",children:e}),Object(_.jsx)("span",{className:"created",children:n})]}),Object(_.jsx)("button",{onClick:function(){N(a),h(!0),d(function(t){return{type:v,payload:t}}(o))},className:"icon icon-edit"}),Object(_.jsx)("button",{onClick:function(){return i(u)},className:"icon icon-destroy"})]}),"editing"===a&&Object(_.jsx)("form",{onSubmit:function(t){t.preventDefault(),N(a),d({type:y,payload:{index:o,editedText:b,editedStatus:D}}),d(k(o,D)),h(!1)},children:Object(_.jsx)("input",{type:"text",autoFocus:!0,className:"edit edit-mode",id:o,onChange:function(t){return function(t){var e=t.target.value;O(e)}(t)},value:b,onKeyPress:function(t){return d((e=t.key,{type:f,payload:e}));var e}})})]})},K=function(t){var e=t.tasks,n=Object(r.c)(),c=function(t,e,c){return n(function(t,e,n){return{type:m,payload:{i:t,status:e,id:n}}}(t,e,c))},a=function(t){return n(function(t){return{type:x,payload:t}}(t))};return console.log("rendering todos",e),Object(_.jsx)("ul",{className:"todo-list",children:e.map((function(t,e){var n=t.id,o=t.text,s=t.time,r=t.status;return Object(_.jsx)(I,{id:n,text:o,time:s,status:r,i:e,onComplete:c,onRemove:a},n)}))})},H=n(15),J=function(t){return t.app.todos},P=function(t){return t.app.currentFilter},V=Object(H.a)(J,(function(t){return t.filter((function(t){return"completed"!==t.status})).length})),U=Object(H.a)([P,J],(function(t,e){return"completed"===t?e.filter((function(t){return"completed"===t.status||"editing"===t.status})):"active"===t?e.filter((function(t){return"active"===t.status||"editing"===t.status})):e})),W=Object(r.b)((function(t){return{filter:P(t),tasksRemaining:V(t),todosToRender:U(t)}}))((function(t){var e=t.filter,n=t.tasksRemaining,c=t.todosToRender,a=Object(r.c)();return Object(_.jsxs)("section",{className:"todoapp",children:[Object(_.jsx)(L,{}),Object(_.jsx)(K,{tasks:c}),Object(_.jsx)(M,{tasksRemaining:n,onFilter:function(t){var e=t.target.dataset.filter;a({type:E,payload:e})},onRemoveCompleted:function(){a({type:g,payload:c})},filter:e})]})})),q=(n(33),function(){return Object(_.jsx)(W,{})});s.a.render(Object(_.jsx)(a.a.StrictMode,{children:Object(_.jsx)(r.a,{store:w,children:Object(_.jsx)(i.a,{persistor:T,children:Object(_.jsx)(q,{})})})}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.126a8f09.chunk.js.map